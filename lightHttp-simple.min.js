(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(){var d={parseUrl:function(f){var l,g,j,p,r,q;var k,m,o,h={};k=/(https?):\/\/([a-z0-9][a-z0-9\-\.]+[a-z0-9])(:[0-9]+)?(\/[^\?]*)?\??(.*)/i;o={port:80,protocol:"",host:"",path:"",param:""};m=f.match(k);if(m&&m[2]){o.protocol=m[1].toLowerCase();o.host=m[2]}if(m&&m[3]&&m[3]!="undefined"){o.port=parseInt(m[3].substr(1),10)}else{if("https"===o.protocol){o.port=443}}if(m&&!m[4]){o.path="/"}else{o.path=m[4]}if(m&&m[5]){j=m[5].split(/&/);g=j.length;for(l=0;l<g;l++){p=j[l].indexOf("=");r=j[l].substr(0,p);q=j[l].substr(p+1,j[l].length-p-1);if(h[r]){if(Object.prototype.toString.call(h[r])==="[object Array]"){h[r].push(q)}else{h[r]=[h[r],q]}}else{h[r]=q}}o.param=h}return o},stringifyParam:function(h){var g=[];for(var f in h){g.push(f+"="+encodeURIComponent(h[f]))}return g.join("&")},addParams:function(f,h){var g;g=this.stringifyParam(h);if(!g){return f}if(f.match(/\?/)){f+="&"}else{f+="?"}f+=g;return f}};c=c.exports=d}())},{}],2:[function(b,c,a){Function.prototype.bind=Function.prototype.bind||function(g){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var h=Array.prototype.slice,i=h.call(arguments,1),j=this,l=function(){},k=function(){return j.apply(this instanceof l?this:g||window,i.concat(h.call(arguments)))};l.prototype=this.prototype;k.prototype=new l();return k};var d=b("./lib.js");(function(){function f(){if(!d){console.log("Missing library named lightHttpLib")}this.jsonpIndex=1;this.lightHttpLib=d;this.timeout=15000;this.jsonpCallbackList={}}var g=f.prototype;g.get=function(h,i){h=this.lightHttpLib.addParams(h,i);window.location.href=h};g.post=function(i,l){var k,j,h;k=document.createElement("form");k.action=i;k.method="POST";for(j in l){if(!l.hasOwnProperty(j)){continue}h=document.createElement("input");h.name=j;h.value=l[j];k.appendChild(h)}document.body.appendChild(k);k.submit()};g.ajax=function(){var j=["ajax","GET"];for(var k=0,h=arguments.length;k<h;k++){j.push(arguments[k])}return this.request.apply(this,j)};g.ajaxpost=g.ajaxPost=function(){var j=["ajaxPost","POST"];for(var k=0,h=arguments.length;k<h;k++){j.push(arguments[k])}return this.request.apply(this,j)};g.pajax=function(){var j=["pjax","GET"];for(var k=0,h=arguments.length;k<h;k++){j.push(arguments[k])}return this.request.apply(this,j)};g.jsonp=function(j,l,n,m){var i,k,h;if(!l){l={}}this.cleanJsonpCallback();h=this;k="lightHttp_jsonp_"+this.jsonpIndex+"_"+(new Date()).getTime();l.callback=k;window[k]=function(o){m(o,{});h.jsonpCallbackList[k]=1};this.jsonpCallbackList[k]=0;j=this.lightHttpLib.addParams(j,l);if(typeof(n)=="function"){m=n}i=document.createElement("script");i.src=j;document.body.appendChild(i);this.jsonpIndex++};g.request=function(){var q="GET",t,i,l,o,j,s,k="",m=true,h,n=false,v={},p={};var r,u;if(!arguments){return""}if(typeof(arguments[0])!="undefined"){j=arguments[0]}if(typeof(arguments[1])!="undefined"){q=arguments[1]}if(typeof(arguments[2])!="undefined"){i=arguments[2]}if(typeof(arguments[3])!="undefined"){l=arguments[3]}if(typeof(arguments[4])!="undefined"){if(typeof(arguments[4])=="function"){s=arguments[4]}else{o=arguments[4]}}if(typeof(arguments[5])!="undefined"){if(typeof(arguments[5])=="function"){s=arguments[5]}else{v=arguments[5]}}if(typeof(arguments[6])!="undefined"){s=arguments[6]}if(s){p.callback=s}else{n=true;h=Q.defer();p.defer=h}p.isPromise=n;if(l){p.param=l}t=this.instantiateRequest();p.xhr=t;r=this.responseHandler.bind(this,p);u=this.timeoutHandler.bind(this,p);if(t.timeout){if(v.timeout){t.timeout=v.timeout}else{t.timeout=this.timeout}t.ontimeout=u}t.onreadystatechange=r;k=this.lightHttpLib.stringifyParam(l);if(q==="POST"){t.open(q,i,m);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.send(k)}else{if(i.match(/\?/)){i+="&"+k}else{i+="?"+k}t.open(q,i,m);t.send()}if(true===n){return h.promise}};g.instantiateRequest=function(){var j;if(window.XMLHttpRequest){j=new XMLHttpRequest();if(j.overrideMimeType){j.overrideMimeType("text/xml")}}else{if(window.ActiveXObject){try{j=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{j=new ActiveXObject("Microsoft.XMLHTTP")}catch(h){}}}}return j};g.responseHandler=function(i){var k="",h={},j;j=i.xhr;if(j.readyState==4){h=j;k=j.responseText;if(true===i.isPromise){i.defer.resolve(k,h)}else{if(i.callback){i.callback(k,h)}}}};g.timeoutHandler=function(h){};g.jsonpHander=function(){};g.cleanJsonpCallback=function(){var h;for(h in this.jsonpCallbackList){if(this.jsonpCallbackList[h]===1){try{delete window[h]}catch(i){}}}};window.lightHttp=f}())},{"./lib.js":1}]},{},[2]);
